<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Converting ZIP Codes to Other Geographies • zippeR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Converting ZIP Codes to Other Geographies">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zippeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/basics.html">Basics of ZIP Codes and ZCTAs</a></li>
    <li><a class="dropdown-item" href="../articles/converting-zips.html">Converting ZIP Codes to Other Geographies</a></li>
    <li><a class="dropdown-item" href="../articles/demographic-geometric-zcta-data.html">Demographic and Geometric ZCTA Data</a></li>
    <li><a class="dropdown-item" href="../articles/three-digit-zips.html">Three-digit ZIP Codes and ZCTAs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pfizer-opensource/zippeR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Converting ZIP Codes to Other Geographies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pfizer-opensource/zippeR/blob/main/vignettes/converting-zips.Rmd" class="external-link"><code>vignettes/converting-zips.Rmd</code></a></small>
      <div class="d-none name"><code>converting-zips.Rmd</code></div>
    </div>

    
    
<p>As we’ve noted in our basic overview of ZIP Codes, they are identical
to the U.S. Census Bureau’s ZIP Code Tabulation Areas or other
geographies. We therefore use crosswalk files to convert ZIP Codes to
these other identifiers.</p>
<div class="section level2">
<h2 id="udss-zip-code-to-zcta-crosswalks">UDS’s ZIP Code to ZCTA Crosswalks<a class="anchor" aria-label="anchor" href="#udss-zip-code-to-zcta-crosswalks"></a>
</h2>
<p><code>zippeR</code> provides an interface for accessing the former
UDS Mapper project’s ZIP to ZCTA crosswalk files](<a href="http://web.archive.org/web/20231218141557/https://udsmapper.org/zip-code-to-zcta-crosswalk/" class="external-link uri">http://web.archive.org/web/20231218141557/https://udsmapper.org/zip-code-to-zcta-crosswalk/</a>).
Crosswalk files are critical because not all ZIP codes are in the exact
same ZCTA. The UDS files are available from 2010 through 2021 in a
standardized format:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">zi_load_crosswalk</span>(<span class="at">year =</span> <span class="dv">2020</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># A tibble: 41,096 × 6                                                                                                                                                                                 </span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>   ZIP   PO_NAME    STATE ZIP_TYPE                             ZCTA  zip_join_type       </span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                                <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>               </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">00501</span> Holtsville NY    Post Office or large volume customer <span class="dv">11742</span> Spatial join to ZCTA</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">00544</span> Holtsville NY    Post Office or large volume customer <span class="dv">11742</span> Spatial join to ZCTA</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">00601</span> Adjuntas   PR    ZIP Code Area                        <span class="dv">00601</span> ZIP Matches ZCTA    </span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">00602</span> Aguada     PR    ZIP Code Area                        <span class="dv">00602</span> ZIP Matches ZCTA    </span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">00603</span> Aguadilla  PR    ZIP Code Area                        <span class="dv">00603</span> ZIP Matches ZCTA    </span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">00604</span> Aguadilla  PR    Post Office or large volume customer <span class="dv">00603</span> Spatial join to ZCTA</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">00605</span> Aguadilla  PR    Post Office or large volume customer <span class="dv">00603</span> Spatial join to ZCTA</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">00606</span> Maricao    PR    ZIP Code Area                        <span class="dv">00606</span> ZIP Matches ZCTA    </span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">00610</span> Anasco     PR    ZIP Code Area                        <span class="dv">00610</span> ZIP Matches ZCTA    </span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">00611</span> Angeles    PR    Post Office or large volume customer <span class="dv">00641</span> Spatial join to ZCTA</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># … with 41,086 more rows</span></span></code></pre></div>
<p>As with the three-digit ZCTA geometry, users should evaluate these
data carefully before using them to ensure they are fit for purpose. In
particular, they should note that ZIPs that do not have corresponding
ZCTAs (such as Armed Forces mailing ZIPs and those in some overseas
territories) are not included. Users should also remember that
individuals may live in a different ZCTA from their mailing address when
that address is a Post Office or some other large volume customer.</p>
<p>They can be used with <code><a href="../reference/zi_crosswalk.html">zi_crosswalk()</a></code> to convert given
ZIP codes to ZCTAs:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="sc">&gt;</span> zips <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), <span class="at">ZIP =</span> <span class="fu">c</span>(<span class="st">"63139"</span>, <span class="st">"63108"</span>, <span class="st">"00501"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">zi_crosswalk</span>(zips, <span class="at">input_zip =</span> ZIP, <span class="at">dict =</span> <span class="st">"UDS 2021"</span>) </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># A tibble: 3 × 3                                                                                                                                                                                      </span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>     id ZIP   ZCTA </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span> <span class="dv">63139</span> <span class="dv">63139</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span> <span class="dv">63108</span> <span class="dv">63108</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span> <span class="dv">00501</span> <span class="dv">11742</span></span></code></pre></div>
<p>If <code>"UDS 2021"</code> (or any other year between 2009 and 2023)
is given for <code>dict</code>, <code><a href="../reference/zi_crosswalk.html">zi_crosswalk()</a></code> will
automatically download the corresponding UDS crosswalk file. A custom
crosswalk can also be supplied for <code>dict</code> in lieu of using
the UDS data, including a crosswalk created from
<code><a href="../reference/zi_load_crosswalk.html">zi_load_crosswalk()</a></code> using HUD data. In that case,
<code>dict_zip</code> and <code>dict_zcta</code> should be updated to
correctly match input variable names. <code>style</code> can also be
used if the custom dictionary contains three digit ZCTAs instead. If no
custom dictionary is supplied, <code><a href="../reference/zi_crosswalk.html">zi_crosswalk()</a></code> will try to
convert the dictionary’s five-digit ZCTAs to three-digits:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">zi_crosswalk</span>(zips, <span class="at">input_zip =</span> ZIP, <span class="at">dict =</span> <span class="st">"UDS 2021"</span>, <span class="at">style =</span> <span class="st">"zcta3"</span>) </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>Dictionary five<span class="sc">-</span>digit ZCTAs converted to three<span class="sc">-</span>digit ZCTAs.                                                                                                                                            </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>     id ZIP   ZCTA3</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span> <span class="dv">63139</span> <span class="dv">631</span>  </span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span> <span class="dv">63108</span> <span class="dv">631</span>  </span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span> <span class="dv">00501</span> <span class="dv">117</span>  </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="huds-zip-code-to-census-geography-crosswalks">HUD’s ZIP Code to Census Geography Crosswalks<a class="anchor" aria-label="anchor" href="#huds-zip-code-to-census-geography-crosswalks"></a>
</h2>
<p>The U.S. Housing and Urban Development (HUD) Department provides ZIP
code to Census geography crosswalks that can be used to convert ZIP
codes to Census Tracts, counties, and other geographies. These data are
available through the <a href="https://www.huduser.gov/portal/datasets/usps_crosswalk.html" class="external-link">HUD
User website</a>. Unlike the UDS files, ZIP Code Tabulation Areas are
not one of the geographies including. If HUD data are used, be aware of
ZIP Codes mapping into multiple Census Tracts, counties, etc. Many users
may want to pick a “most likely” county (or other Census geometry) based
on the proportion of commercial or residential customers.</p>
<p>To use the HUD data, users must first obtain an API key from the <a href="https://www.huduser.gov/portal/dataset/uspszip-api.html" class="external-link">HUD User
website</a>. Once you have an API key, they can use
<code><a href="../reference/zi_load_crosswalk.html">zi_load_crosswalk()</a></code> to download the data either by passing
the key directly to the function or by storing the key in their <a href="https://docs.posit.co/ide/user/ide/guide/environments/r/managing-r.html" class="external-link">.Rprofile</a>
under the object name <code>hud_key</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>hud_key <span class="op">=</span> <span class="st">"&lt;PASTE KEY&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>The key can also be passed to <code>zi_load_crosswalk</code> directly
with the <code>key</code> argument:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">zi_load_crosswalk</span>(<span class="at">zip_source =</span> <span class="st">"HUD"</span>, <span class="at">year =</span> <span class="dv">2023</span>, <span class="at">qtr =</span> <span class="dv">1</span>, <span class="at">target =</span> <span class="st">"COUNTY"</span>,</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="sc">+</span>                   <span class="at">query =</span> <span class="fu">c</span>(<span class="st">"63138"</span>, <span class="st">"63139"</span>))</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># A tibble: 3 × 8</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  ZIP   GEOID RES_RATIO BUS_RATIO OTH_RATIO TOT_RATIO CITY        STATE</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="dv">1</span> <span class="dv">63138</span> <span class="dv">29189</span>  <span class="fl">0.999</span>       <span class="fl">0.988</span>          <span class="dv">1</span>  <span class="fl">0.999</span>    SAINT LOUIS MO   </span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="dv">2</span> <span class="dv">63138</span> <span class="dv">29510</span>  <span class="fl">0.000518</span>    <span class="fl">0.0124</span>         <span class="dv">0</span>  <span class="fl">0.000956</span> SAINT LOUIS MO   </span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="dv">3</span> <span class="dv">63139</span> <span class="dv">29510</span>  <span class="dv">1</span>           <span class="dv">1</span>              <span class="dv">1</span>  <span class="dv">1</span>        SAINT LOUIS MO </span></code></pre></div>
<p>Queries can be either a single ZIP Code, a vector of ZIP Codes, a
state abbreviation, or the word <code>"ALL"</code> to download the
entire crosswalk file. Using states or <code>"ALL"</code> is available
from the 1st quarter of 2021 onwards. The <code>target</code> argument
can be set to “COUNTY”, “TRACT”, “CBSA”, “CBSADIV”, “CD”, or
“COUNTYSUB”. The <code>year</code> and <code>qtr</code> arguments
specify the year and quarter of the data to download.</p>
<p>Note that the above query finds that the ZIP Code <code>63138</code>
straddles two counties, but the vast majority of both residential and
commercial customers are in St. Louis City (<code>GEOID</code> is
<code>29510</code>). If you were building a crosswalk file from these,
you might want to select St. Louis City as the “most likely” county for
ZIP Code <code>63138</code>. The</p>
<p>Since using the HUD data requires a number of analytic choices, it
cannot be accessed directly through <code><a href="../reference/zi_crosswalk.html">zi_crosswalk()</a></code>.
Instead, you should construct the desired crosswalk file yourself and
then pass it to <code><a href="../reference/zi_crosswalk.html">zi_crosswalk()</a></code> as a custom dictionary. The
<code><a href="../reference/zi_prep_hud.html">zi_prep_hud()</a></code> function can help you prepare the HUD data
for use in joins:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># access to HUD ZIP Code to County crosswalk for all ZIP Codes in Missouri</span></span>
<span><span class="va">mo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_load_crosswalk.html">zi_load_crosswalk</a></span><span class="op">(</span>zip_source <span class="op">=</span> <span class="st">"HUD"</span>, year <span class="op">=</span> <span class="fl">2023</span>, qtr <span class="op">=</span> <span class="fl">1</span>, </span>
<span>  target <span class="op">=</span> <span class="st">"COUNTY"</span>, query <span class="op">=</span> <span class="st">"MO"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prep data</span></span>
<span><span class="va">mo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_prep_hud.html">zi_prep_hud</a></span><span class="op">(</span><span class="va">mo</span>, by <span class="op">=</span> <span class="st">"residential"</span><span class="op">)</span></span></code></pre></div>
<p>The resulting output contains one row of data for each ZIP Code
matched with the county that has the highest proportion of residential
ZIP Codes. Users can also construct a crosswalk using commercial
addresses or total addresses. When used with multiple states, if the ZIP
Code straddles two states, two records will be returned.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Prener, Timothy Wiemken, Angela Cook.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
