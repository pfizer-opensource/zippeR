<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Demographic and Geometric ZCTA Data â€¢ zippeR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Demographic and Geometric ZCTA Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zippeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/basics.html">Basics of ZIP Codes and ZCTAs</a></li>
    <li><a class="dropdown-item" href="../articles/converting-zips.html">Converting ZIP Codes to Other Geographies</a></li>
    <li><a class="dropdown-item" href="../articles/demographic-geometric-zcta-data.html">Demographic and Geometric ZCTA Data</a></li>
    <li><a class="dropdown-item" href="../articles/three-digit-zips.html">Three-digit ZIP Codes and ZCTAs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pfizer-opensource/zippeR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Demographic and Geometric ZCTA Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pfizer-opensource/zippeR/blob/main/vignettes/demographic-geometric-zcta-data.Rmd" class="external-link"><code>vignettes/demographic-geometric-zcta-data.Rmd</code></a></small>
      <div class="d-none name"><code>demographic-geometric-zcta-data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="zcta-geometry">ZCTA Geometry<a class="anchor" aria-label="anchor" href="#zcta-geometry"></a>
</h2>
<p><code>zippeR</code> providers support for downloading geometric data
as <code>sf</code> objects. For five-digit ZCTAs, <code>tigris</code> is
used to access the TIGER/Line database. For three-digit ZCTAs, these are
downloaded from <a href="https://github.com/chris-prener/zcta3" class="external-link">a
repository on GitHub</a> maintained by the author. These are generalized
versions of the ZCTA geometry designed to provide a smaller file size
suitable for storage on GitHub. Nevertheless, each file is still
approximately 60MB in size. Users should carefully evaluate the
geometric data to ensure they are fit for purpose, and note that these
are provided without warranty.</p>
<p>One major difference between <code><a href="https://rdrr.io/pkg/tigris/man/zctas.html" class="external-link">tigris::zctas()</a></code> and
<code>zipper::get_geometry()</code> is that <code>zippeR</code> provides
support for automatically returning ZCTAs that intersect or whose
centroids lie within states and/or counties. This can be used with both
the five- and three-digit ZCTAs. In general, the intersect method will
yield more ZCTAs than are necessary while the centroid method will yield
too few. For example, for Missouri, we need to use the
<code>includes</code> argument to add several additional ZCTAs in whose
centroids do not fall within Missouri itself (they all lie in Iowa):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geo12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_geometry.html">zi_get_geometry</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2012</span>, state <span class="op">=</span> <span class="st">"MO"</span>, method <span class="op">=</span> <span class="st">"centroid"</span>, </span>
<span>    includes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"51640"</span>, <span class="st">"52542"</span>, <span class="st">"52573"</span>, <span class="st">"52626"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you use the intersect method, the corresponding
<code>excludes</code> argument can be used to drop ZCTAs that are not
needed. Note that all ZCTAs passed to <code>starts_with</code> (which
accepts two-digit values), <code>includes</code>, and
<code>excludes</code> are validated to ensure they follow formatting
requirements. As noted above, the validation process does not ensure
that inputs correspond to valid ZCTAs at this time.</p>
<p>One additional option to note is that, when downloading nation-wide
ZCTA data, you can use the <code>shift_geo</code> argument to place
Alaska, Hawaii, and Puerto Rico in the lower left-hand corner of your
map:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geo10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_geometry.html">zi_get_geometry</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2010</span>, shift_geo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="zcta-demographics">ZCTA Demographics<a class="anchor" aria-label="anchor" href="#zcta-demographics"></a>
</h2>
<p>Downloading the geometric data can be used for mapping, or simply to
produce a vector of all five- or three-digit ZCTAs in a given area.
These, in-turn, can be used to define areas where demographic data are
desired. The <code><a href="../reference/zi_get_demographics.html">zi_get_demographics()</a></code> wraps
<code>tidycensus</code> functions to get data using a single, uniform
API. For instance, we can download the total population for all ZCTAs
based on the 2010 Decennial Census:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pop10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_demographics.html">zi_get_demographics</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2010</span>, variables <span class="op">=</span> <span class="st">"P001001"</span>, survey <span class="op">=</span> <span class="st">"sf1"</span><span class="op">)</span></span></code></pre></div>
<p><em>Note: As of now, the Census Bureau has not released ZCTA data for
the 2020 Decennial Census.</em></p>
<p>If you are working with output from <code><a href="../reference/zi_get_geometry.html">zi_get_geometry()</a></code>,
you can specify the <code>GEOID</code> vector in your call to limit the
number of ZCTAs returned:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gini12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_demographics.html">zi_get_demographics</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2012</span>, table <span class="op">=</span> <span class="st">"B19083"</span>, survey <span class="op">=</span> <span class="st">"acs5"</span>, zcta <span class="op">=</span> <span class="va">geo12</span><span class="op">$</span><span class="va">GEOID</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Prener, Timothy Wiemken, Angela Cook.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
