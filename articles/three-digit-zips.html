<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Three-digit ZIP Codes and ZCTAs • zippeR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Three-digit ZIP Codes and ZCTAs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zippeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/basics.html">Basics of ZIP Codes and ZCTAs</a></li>
    <li><a class="dropdown-item" href="../articles/converting-zips.html">Converting ZIP Codes to Other Geographies</a></li>
    <li><a class="dropdown-item" href="../articles/demographic-geometric-zcta-data.html">Demographic and Geometric ZCTA Data</a></li>
    <li><a class="dropdown-item" href="../articles/three-digit-zips.html">Three-digit ZIP Codes and ZCTAs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pfizer-opensource/zippeR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Three-digit ZIP Codes and ZCTAs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pfizer-opensource/zippeR/blob/main/vignettes/three-digit-zips.Rmd" class="external-link"><code>vignettes/three-digit-zips.Rmd</code></a></small>
      <div class="d-none name"><code>three-digit-zips.Rmd</code></div>
    </div>

    
    
<p>Three-digit ZIP Codes appear frequently in real world health care
data. Since patient registration and medical billing rely on patient
addresses, they are common data elements in EHR and medical claims
information systems. Providing the first three digits of a ZIP Code is a
common data strategy vendors seek to provide geographic data while
protecting patient privacy. Unfortunately, ZIP Codes are difficult to
work with, and utilizing three-digit versions offers additional
challenges.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Three-digit ZIP Codes refer to a group of ZIP Codes that share the
same first three digits. For example, the St. Louis, Missouri ZIP Codes
63101, 63102, and 63103 would all be part of the 631 three-digit ZIP
Code. These first three digits correspond to “sectional center
facilities” (SCFs) operated by the United States Postal Service (USPS).
Sectional center facilities sit between larger “network distribution
centers” (NDCs) and local post offices, sorting and distributing mail.
Each SCF has one more three-digit ZIP Codes associated with it. The SCF
for St. Louis is in St. Louis City, Missouri, and it services
approximately a dozen three-digit ZIP Codes in Eastern Missouri and
Southern Illinois.</p>
<p>Unlike five-digit ZIP Codes, which have the Census Bureau analogue of
ZIP Code Tabulation Areas (ZCTAs), there is no Census equivalent for
three-digit ZIP Codes. This is because three-digit ZIP Codes are not
geographic areas, but rather mail sorting facilities. Aggregating ZCTAs
using their first three digits illustrate yet another challenge - the
boundaries of three-digit ZCTAs are not contiguous. This means that some
ZCTAs are split into multiple pieces that are not adjacent to each
other.</p>
<p>When the first three-digits are the only three digits given, it is
not possible to use the ZIP to ZCTA crosswalk files included in
<code>zippeR</code>. This increases the misclassification rate, because
some of the observations will be assigned to the wrong three-digit ZCTA.
For example, the ZIP Code 64999 in Kansas City is part of the 649
three-digit ZIP Code, but it is not part of the 649 three-digit ZCTA.
According to the 2022 UDS crosswalk file, the appropriate ZCTA for 64999
is 64108, which has the 641 three-digit ZIP Code.</p>
<p><code>zippeR</code> provides several functions for downloading and
using three-digit ZCTA data. They should be used with caution and the
user should be aware of the limitations of the data described above.</p>
</div>
<div class="section level2">
<h2 id="labeling-three-digit-zip-codes">Labeling Three-digit ZIP Codes<a class="anchor" aria-label="anchor" href="#labeling-three-digit-zip-codes"></a>
</h2>
<p>The <code><a href="../reference/zi_load_labels.html">zi_load_labels()</a></code> function can be used to load a set
of labels for three-digit ZIP Codes. The function requires a
<code>type</code> argument, which should be set to <code>"zip3"</code>.
The function will return a tibble with the area and state associated
with the SCF assigned to a particular three-digit ZIP.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">zi_load_labels</span>(<span class="at">source =</span> <span class="st">"USPS"</span>, <span class="at">type =</span> <span class="st">"zip3"</span>, <span class="at">vintage =</span> <span class="dv">202408</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># A tibble: 931 × 3                                                                                                                                                                                    </span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>   zip3  label_area label_state</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">005</span>   MID<span class="sc">-</span>ISLAND NY         </span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">006</span>   SAN JUAN   PR         </span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">007</span>   SAN JUAN   PR         </span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">008</span>   SAN JUAN   PR         </span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">009</span>   SAN JUAN   PR         </span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">010</span>   HARTFORD   CT         </span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">011</span>   HARTFORD   CT         </span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">012</span>   HARTFORD   CT         </span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">013</span>   CENTRAL    MA         </span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">014</span>   CENTRAL    MA         </span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># ℹ 921 more rows</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>Use these values with caution - the area and state may not correspond
to the physical location of associated five-digit ZIP Codes. For
example, the three-digit ZIP <code>010</code> covers Western
Massachusetts. However, the SCF that serves it is located in Hartford,
CT. The <code>label_area</code> and <code>label_state</code> values are
based on the SCF location, not the geographic area served by the
three-digit ZIP Code.</p>
<p>The <code><a href="../reference/zi_label.html">zi_label()</a></code> function can be used to label your data
with these values. If you have five-digit ZIP Codes and you want to
convert them to three-digit ZIPs, the <code><a href="../reference/zi_convert.html">zi_convert()</a></code> function
is a helpful tool for shortening those values quickly.</p>
</div>
<div class="section level2">
<h2 id="downloading-geometric-data-for-three-digit-zctas">Downloading Geometric Data for Three-digit ZCTAs<a class="anchor" aria-label="anchor" href="#downloading-geometric-data-for-three-digit-zctas"></a>
</h2>
<p>Three-digit ZCTA geometric data can be downloaded using
<code><a href="../reference/zi_get_geometry.html">zi_get_geometry()</a></code>. The following syntax downloads all ZCTA3
for the United States, excluding overseas territories:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zcta3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_geometry.html">zi_get_geometry</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, style <span class="op">=</span> <span class="st">"zcta3"</span>, territory <span class="op">=</span> <span class="cn">NULL</span>, method <span class="op">=</span> <span class="st">"intersect"</span><span class="op">)</span></span></code></pre></div>
<p>Optionally, you can specify a specific state, county, or territory to
limit your data object’s extent:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mo_zcta3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_geometry.html">zi_get_geometry</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, style <span class="op">=</span> <span class="st">"zcta3"</span>, state <span class="op">=</span> <span class="st">"MO"</span>, territory <span class="op">=</span> <span class="cn">NULL</span>, method <span class="op">=</span> <span class="st">"intersect"</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/zi_get_geometry.html">zi_get_geometry()</a></code> function downloads pre-made
geometric data from the Census Bureau’s TIGER/Line Shapefiles, which
were created by downloading the ZCTA data, grouping features by the
first three digits of the ZCTA, and then summarizing the features to
dissolve them. Finally,
<code>sf::st_simplify(out, preserveTopology = TRUE, dTolerance = 20)</code>
was used to simplify the features and reduce the size of each file.</p>
<p>Data are available from 2010 through 2023, excluding 2011. If a
specific state or county is requested using those optional arguments,
included ZCTAs are defined using either
<code>method = "intersect"</code> or <code>method = "centroid"</code>.
The <code>"intersect"</code> approach includes any ZCTA that touches a
given state or county with an area greater than <code>0</code>, while
the <code>"centroid"</code> approach includes any ZCTA whose geographic
midpoint lies within the requested state or county.</p>
</div>
<div class="section level2">
<h2 id="creating-demographic-estimates-for-three-digit-zctas">Creating Demographic Estimates for Three-digit ZCTAs<a class="anchor" aria-label="anchor" href="#creating-demographic-estimates-for-three-digit-zctas"></a>
</h2>
<p>Creating a master list of three-digit ZCTAs is a pre-requisite for
creating demographic estimates for these geographies. The object we
created above, <code>mo_zcta3</code>, has a <code>ZCTA3</code> column
that can serve as that reference. Once you have your list, you should
download demographic data using <code><a href="../reference/zi_get_demographics.html">zi_get_demographics()</a></code>. For
example, to download population estimates for 2020, you would use the
following code:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mo_pop20</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_get_demographics.html">zi_get_demographics</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, variables <span class="op">=</span> <span class="st">"B01003_001"</span>, survey <span class="op">=</span> <span class="st">"acs5"</span><span class="op">)</span></span></code></pre></div>
<p>Be sure not to limit your download with the <code>zcta</code>
argument. It is important that all ZCTAs are included in the download,
even if they are not in the list of three-digit ZCTAs. If only the
five-digit ZCTAs that overlap with your state or county of interest are
included, you will get incorrect values for ZCTAs that are split across
multiple jurisdictions.</p>
<p>Once these are obtained, we can pass the object to
<code><a href="../reference/zi_aggregate.html">zi_aggregate()</a></code> and can specify an input for
<code>zcta</code> at this stage:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mo_pop20</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/zi_aggregate.html">zi_aggregate</a></span><span class="op">(</span><span class="va">mo_pop20</span>, year <span class="op">=</span> <span class="fl">2020</span>, extensive <span class="op">=</span> <span class="st">"B01003_001"</span>, survey <span class="op">=</span> <span class="st">"acs5"</span>, zcta <span class="op">=</span> <span class="va">mo_zcta3</span><span class="op">$</span><span class="va">ZCTA3</span><span class="op">)</span></span></code></pre></div>
<p>This will aggregate the population estimates for the five-digit ZCTAs
to the three-digit ZCTAs.</p>
<p>The <code><a href="../reference/zi_aggregate.html">zi_aggregate()</a></code> function requires that you specify
two sets of variable lists - those that are <code>extensive</code>
(i.e. count data) and those that are <code>intensive</code> (i.e. ratio
or median data). For <code>extensive</code> data,
<code><a href="../reference/zi_aggregate.html">zi_aggregate()</a></code> sums the estimates and applies a formula to
the margins of error (the square root of the sum of squared margins of
error for each five-digit ZCTA within a three-digit region). For
<code>intensive</code> variables, a weighted mean or median is used for
both the estimate and the margin of error. Note that you can pipe this
workflow and can specify multiple variables at once for aggregation:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/zi_get_demographics.html">zi_get_demographics</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B01003_001"</span>, <span class="st">"B19083_001"</span><span class="op">)</span>, survey <span class="op">=</span> <span class="st">"acs5"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/zi_aggregate.html">zi_aggregate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, extensive <span class="op">=</span> <span class="st">"B01003_001"</span>, intensive <span class="op">=</span> <span class="st">"B19083_001"</span>, survey <span class="op">=</span> <span class="st">"acs5"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">demo20</span></span></code></pre></div>
<p>The <code>variables</code>, <code>table</code> (which can be used in
place of <code>variables</code> for <code><a href="../reference/zi_get_demographics.html">zi_get_demographics()</a></code>),
<code>extensive</code>, and <code>intensive</code> arguments are not
validated before being passed via <code>tidycensus</code> to the Census
Bureau, so incorrectly formatted variable or table names will generate
potentially cryptic errors.</p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Three-digit ZIP codes are common, especially in health care data, but
are challenging to work with. While <code>zippeR</code> provides a set
of tools for calculating demographic estimates from the American
Community Survey and mapping them, this should be done with caution
based on the limitations described above.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Prener, Timothy Wiemken, Angela Cook.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
